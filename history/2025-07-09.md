# 2025-07-09 개발 진행내역

## 📋 프로젝트 초기 탐색 및 기반 구축

### 🎯 주요 목표
- PDF 형태의 신구조문대비표에서 조문 변경사항 자동 추출 시스템 구축
- 법률 개정안의 변경/신설/삭제 유형 자동 분류

### 📁 작업 내용

#### 1. 프로젝트 구조 설정
- `data/` 폴더 생성 (raw, processed, no_upload)
- `notebooks/` 폴더 생성 (개발 노트북 저장)
- `scripts/` 폴더 생성 (핵심 스크립트)
- `origin/` 폴더 생성 (원본 개발 코드)

#### 2. 초기 탐색 작업 (`250709_파악.ipynb`)

**PDF 텍스트 추출 시도**
- PyMuPDF (fitz) 사용하여 PDF 텍스트 추출
- 정규표현식을 통한 "현행" ~ "개정안" 구간 탐지
- 기본적인 텍스트 분리 및 DataFrame 변환

**표 추출 시도**
- pdfplumber를 사용한 표 구조 추출
- 신구조문대비표 영역 자동 인식
- 좌우 열 분리 (현행/개정안)

**수치 변경 추출**
- 조문별 숫자값 변경사항 자동 추출
- "조", "억" 단위 포함한 수치 비교
- 결과를 CSV/Excel로 저장

#### 3. 조문 비교 로직 개발 (`250709_뇌피셜.ipynb`)

**핵심 함수 구현**
- `extract_text_from_pdf()`: PDF 텍스트 추출
- `split_by_clause()`: 조문 단위로 텍스트 분리
- `compare_clauses()`: 조문 비교 및 변경유형 분류
- `save_to_csv()`: 결과 저장

**변경 유형 분류**
- 신설: 새로운 조문 추가
- 삭제: 기존 조문 제거  
- 수정: 조문 내용 변경 (유사도 80% 기준)

#### 4. 원본 개발 코드 (`origin/` 폴더)

**법률명까지신구조문대비표.py**
- PDF에서 법률명 자동 추출
- 표 기반 추출 + 조문블록 fallback 방식
- 폴더 내 모든 PDF 파일 배치 처리
- 처리 통계 및 실패 파일 목록 제공

**변경신설삭제이동.py**
- Excel 파일에서 조문 병합 처리
- placeholder 판정 로직 (항/호/목 번호 등)
- 변경유형 판정 우선순위 로직
- 폴더 내 모든 Excel 파일 배치 처리

### 🔧 기술 스택
- **PDF 처리**: PyMuPDF (fitz), pdfplumber
- **데이터 처리**: pandas, numpy
- **텍스트 분석**: re (정규표현식)
- **파일 처리**: openpyxl (Excel 출력)

### 📊 처리 결과
- 기본적인 PDF 텍스트 추출 성공
- 표 구조 인식 및 좌우 열 분리 가능
- 조문 단위 비교 로직 구현 완료
- 수치 변경사항 자동 추출 가능

### 🚧 남은 과제
- 배치 처리 시 오류 처리 강화
- 조문 매칭 정확도 향상
- 다양한 PDF 형식 대응
- 결과 파일 관리 개선

---

**다음 단계**: 2025-07-10 배치 처리 개선 및 오류 처리 강화 